<html>
<head>
	<title>Find Hastag</title>
	<script src="js/jquery-2.1.4.min.js"></script>
	<script type="text/javascript" src="http://momentjs.com/downloads/moment.js"></script>
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/style.css">
</head>
<body>

	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container-fluid col-md-offset-1 col-md-10">
			<h4><STRONG>#</STRONG>Find<STRONG>Hashtag</STRONG></h4>
		</div>
	</nav>


	<div class="row">
		<div class="col-md-offset-1 col-md-10 container">

			<div class="busca col-md-offset-3 col-md-6">
				<label></label><br>
				<div class="input-group">
					<span class="input-group-addon" id="basic-addon1">#</span>
					<input id="hashtag" class="form-control" type="text" placeholder="put a hashtag">
					<span class="input-group-btn">
						<button class="btn btn-primary" onclick="search()">Buscar</button>
					</span>

				</div>			
				<p class="help-block">example: nofilter, vemprarua, ficaadica...</p>
			</div>			
		</div>
	</div>
	<div class="row">
		<div class="col-md-offset-1 col-md-10 container">
			<div id="instagram"></div>
		</div>
	</div>


	<footer class="navbar-fixed-bottom"><p>powered by <strong>Lucas Nogueira</strong> - version 0.1.0</p>
	</footer>

	<script type="text/javascript">
	function search(){
		console.log();
		var hashtag = $("#hashtag").val();
		$("#instagram").empty();
		data = [];

		if(hashtag == ""){
			$("#instagram").append("<span class='bg-warning col-md-offset-5'> <span class='glyphicon glyphicon-exclamation-sign' aria-hidden='true'></span> Invalid tag</span>");
		}else{

			$.ajax({
				type: "GET",
				dataType: "jsonp",
				cache: false,
				url: "https://api.instagram.com/v1/tags/" + hashtag + "/media/recent?client_id=6733d5f2ae4345c9a3e73be491f4293c",
				success: function(data)  {
					if(data.meta.code === 400){
						$("#instagram").append("<span class='bg-warning col-md-offset-5'> <span class='glyphicon glyphicon-exclamation-sign' aria-hidden='true'></span> "+ data.meta.error_message+"</span>");
					}else{
						for (var i = 0; i < 20; i++) {
							console.log(data.data[i]);

							var date = new Date(data.data[i].created_time * 1000);
							var months = ['Jan','Fev','Mar','Abr','Mai','Jun','Jul','Aug','Set','Out','Nov','Dec'];
							var year = date.getFullYear();
							var month = months[date.getMonth()];
							var date = date.getDate();
							var time = date+' de '+ month+' de '+year ;

							$("#instagram").append("<div class='card'><a href='" + data.data[i].link +"' target='_blank'><img class='md-col-6' alt='"+ data.data[i].user.username +"' src='" + data.data[i].images.thumbnail.url +"' ></a><br><p>@"+data.data[i].user.username+"<small><br> "+ time +" - via instagram</small></p></div>");
						}
					}
				}
			});
		}
	}
</script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
</body>
</html>